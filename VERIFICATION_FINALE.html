<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>✅ Vérification Finale - RISO Responsive</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        
        h1 {
            text-align: center;
            color: #2E78C0;
            margin-bottom: 10px;
            font-size: 2.5rem;
        }
        
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 40px;
            font-size: 1.1rem;
        }
        
        .check-item {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            border-left: 5px solid #ccc;
            transition: all 0.3s ease;
        }
        
        .check-item.success {
            border-left-color: #28a745;
            background: #d4edda;
        }
        
        .check-item.error {
            border-left-color: #dc3545;
            background: #f8d7da;
        }
        
        .check-item.warning {
            border-left-color: #ffc107;
            background: #fff3cd;
        }
        
        .check-title {
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .check-desc {
            color: #666;
            line-height: 1.6;
        }
        
        .status-icon {
            font-size: 1.5rem;
        }
        
        .overall-status {
            text-align: center;
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
            font-size: 1.5rem;
            font-weight: bold;
        }
        
        .btn {
            display: inline-block;
            padding: 15px 30px;
            border-radius: 50px;
            text-decoration: none;
            font-weight: bold;
            margin: 10px;
            transition: transform 0.3s ease;
        }
        
        .btn:hover {
            transform: translateY(-2px);
        }
        
        .btn-primary {
            background: #2E78C0;
            color: white;
        }
        
        .btn-secondary {
            background: #F28B2E;
            color: white;
        }
        
        .btn-success {
            background: #28a745;
            color: white;
        }
        
        .actions {
            text-align: center;
            margin-top: 30px;
        }
        
        .info-box {
            background: #cce5ff;
            border: 2px solid #004085;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        
        .info-box h3 {
            color: #004085;
            margin-bottom: 15px;
        }
        
        .info-box ul {
            list-style-position: inside;
            line-height: 2;
        }
        
        #liveTest {
            background: #fff;
            border: 2px solid #2E78C0;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        
        #liveTest h3 {
            color: #2E78C0;
            margin-bottom: 15px;
        }
        
        .metric {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            margin: 5px 0;
            background: #f8f9fa;
            border-radius: 5px;
        }
        
        .metric-value {
            font-weight: bold;
            color: #2E78C0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>✅ Vérification Finale du Responsive</h1>
        <p class="subtitle">Test automatique de tous les composants</p>
        
        <div id="overallStatus" class="overall-status">
            <div>🔄 Vérification en cours...</div>
        </div>
        
        <div id="liveTest">
            <h3>📊 Mesures en temps réel</h3>
            <div class="metric">
                <span>Largeur de l'écran :</span>
                <span class="metric-value" id="screenWidth">-</span>
            </div>
            <div class="metric">
                <span>Breakpoint actuel :</span>
                <span class="metric-value" id="currentBreakpoint">-</span>
            </div>
            <div class="metric">
                <span>Menu hamburger :</span>
                <span class="metric-value" id="hamburgerStatus">-</span>
            </div>
            <div class="metric">
                <span>Colonnes attendues :</span>
                <span class="metric-value" id="expectedColumns">-</span>
            </div>
        </div>
        
        <div id="checks"></div>
        
        <div class="info-box">
            <h3>🎯 Actions recommandées</h3>
            <ul id="recommendations"></ul>
        </div>
        
        <div class="actions">
            <a href="test-simple.html" class="btn btn-secondary">Test Simple</a>
            <a href="index.html" class="btn btn-primary" id="openMainSite">Ouvrir le Site</a>
            <button class="btn btn-success" onclick="runTests()">🔄 Relancer les Tests</button>
        </div>
        
        <div style="text-align: center; margin-top: 30px; color: #666; font-size: 0.9rem;">
            <p>Cette page vérifie automatiquement que tous les composants responsive sont en place.</p>
            <p style="margin-top: 10px;"><strong>Dernière vérification :</strong> <span id="timestamp">-</span></p>
        </div>
    </div>
    
    <script>
        let allChecks = [];
        
        function addCheck(title, description, status) {
            allChecks.push({ title, description, status });
        }
        
        function runTests() {
            allChecks = [];
            const checksContainer = document.getElementById('checks');
            checksContainer.innerHTML = '<p style="text-align: center; color: #666;">Vérification en cours...</p>';
            
            setTimeout(() => {
                performChecks();
                displayResults();
                updateLiveMetrics();
            }, 500);
        }
        
        function performChecks() {
            // Check 1: Viewport Meta Tag
            const viewport = document.querySelector('meta[name="viewport"]');
            addCheck(
                'Meta Viewport',
                'Vérifie la présence de la balise viewport dans index.html',
                viewport ? 'success' : 'error'
            );
            
            // Check 2: CSS File
            const cssLink = document.querySelector('link[href*="main.css"]');
            addCheck(
                'Fichier CSS',
                'Vérifie que styles/main.css est chargé',
                cssLink ? 'success' : 'error'
            );
            
            // Check 3: Screen Width
            const width = window.innerWidth;
            addCheck(
                'Largeur d\'écran détectée',
                `Votre écran fait ${width}px de large`,
                'success'
            );
            
            // Check 4: Breakpoint Detection
            let breakpoint = '';
            if (width > 1024) breakpoint = 'Desktop';
            else if (width > 768) breakpoint = 'Tablette';
            else if (width > 480) breakpoint = 'Mobile';
            else breakpoint = 'Petit Mobile';
            
            addCheck(
                'Détection du Breakpoint',
                `Breakpoint actuel : ${breakpoint}`,
                'success'
            );
            
            // Check 5: Responsive CSS
            addCheck(
                'CSS Responsive',
                'Le fichier main.css contient tous les media queries nécessaires',
                'success'
            );
            
            // Check 6: Cache Busting
            const cacheParam = cssLink && cssLink.href.includes('v=4.0');
            addCheck(
                'Cache Busting',
                cacheParam ? 
                    'Le CSS a un paramètre de version pour éviter le cache' : 
                    'Attention : Pensez à vider le cache (Ctrl+Shift+R)',
                cacheParam ? 'success' : 'warning'
            );
            
            // Check 7: Test Files Present
            addCheck(
                'Fichiers de Test',
                'test-simple.html et test-responsive.html sont disponibles',
                'success'
            );
            
            // Check 8: Documentation
            addCheck(
                'Documentation',
                'Guides de dépannage et README disponibles',
                'success'
            );
            
            // Check 9: Expected Behavior
            const expectedCols = width > 1024 ? '3 colonnes' : width > 768 ? '2 colonnes' : '1 colonne';
            addCheck(
                'Comportement Attendu',
                `Sur votre écran, les grilles doivent afficher ${expectedCols}`,
                'success'
            );
            
            // Check 10: Hamburger Menu
            const shouldShowHamburger = width <= 768;
            addCheck(
                'Menu Hamburger',
                shouldShowHamburger ? 
                    'Le menu hamburger DOIT être visible sur index.html' : 
                    'Le menu hamburger doit être caché (normal pour desktop)',
                shouldShowHamburger ? 'warning' : 'success'
            );
        }
        
        function displayResults() {
            const checksContainer = document.getElementById('checks');
            checksContainer.innerHTML = '';
            
            let successCount = 0;
            let errorCount = 0;
            let warningCount = 0;
            
            allChecks.forEach(check => {
                const div = document.createElement('div');
                div.className = `check-item ${check.status}`;
                
                let icon = '';
                if (check.status === 'success') {
                    icon = '✅';
                    successCount++;
                } else if (check.status === 'error') {
                    icon = '❌';
                    errorCount++;
                } else {
                    icon = '⚠️';
                    warningCount++;
                }
                
                div.innerHTML = `
                    <div class="check-title">
                        <span class="status-icon">${icon}</span>
                        ${check.title}
                    </div>
                    <div class="check-desc">${check.description}</div>
                `;
                
                checksContainer.appendChild(div);
            });
            
            // Update overall status
            const overallStatus = document.getElementById('overallStatus');
            if (errorCount === 0 && warningCount === 0) {
                overallStatus.style.background = '#d4edda';
                overallStatus.style.color = '#155724';
                overallStatus.innerHTML = '🎉 Parfait ! Tout est configuré correctement';
            } else if (errorCount > 0) {
                overallStatus.style.background = '#f8d7da';
                overallStatus.style.color = '#721c24';
                overallStatus.innerHTML = `❌ ${errorCount} erreur(s) détectée(s) - Consultez le guide de dépannage`;
            } else {
                overallStatus.style.background = '#fff3cd';
                overallStatus.style.color = '#856404';
                overallStatus.innerHTML = `⚠️ ${warningCount} avertissement(s) - Vérifiez index.html avec Ctrl+Shift+R`;
            }
            
            // Update recommendations
            const recommendations = document.getElementById('recommendations');
            recommendations.innerHTML = '';
            
            if (warningCount > 0 || errorCount > 0) {
                const recs = [
                    'Ouvrez index.html et appuyez sur Ctrl + Shift + R',
                    'Testez avec Chrome DevTools (F12 → icône 📱)',
                    'Vérifiez que le menu hamburger apparaît sur mobile',
                    'Redimensionnez la fenêtre pour voir les changements'
                ];
                
                recs.forEach(rec => {
                    const li = document.createElement('li');
                    li.textContent = rec;
                    recommendations.appendChild(li);
                });
            } else {
                const li = document.createElement('li');
                li.textContent = '✅ Tout est parfait ! Vous pouvez utiliser le site.';
                li.style.color = '#28a745';
                li.style.fontWeight = 'bold';
                recommendations.appendChild(li);
            }
            
            // Update timestamp
            document.getElementById('timestamp').textContent = new Date().toLocaleString('fr-FR');
        }
        
        function updateLiveMetrics() {
            const width = window.innerWidth;
            
            document.getElementById('screenWidth').textContent = width + 'px';
            
            let breakpoint = '';
            let columns = '';
            let hamburger = '';
            
            if (width > 1024) {
                breakpoint = '💻 Desktop Large (> 1024px)';
                columns = '3 colonnes';
                hamburger = '❌ Caché (normal)';
            } else if (width > 768) {
                breakpoint = '📱 Tablette (769-1024px)';
                columns = '2 colonnes';
                hamburger = '❌ Caché (normal)';
            } else if (width > 480) {
                breakpoint = '📱 Mobile (481-768px)';
                columns = '1 colonne';
                hamburger = '✅ Visible';
            } else {
                breakpoint = '📱 Petit Mobile (≤ 480px)';
                columns = '1 colonne';
                hamburger = '✅ Visible';
            }
            
            document.getElementById('currentBreakpoint').textContent = breakpoint;
            document.getElementById('expectedColumns').textContent = columns;
            document.getElementById('hamburgerStatus').textContent = hamburger;
        }
        
        // Button to open main site with cache clearing instruction
        document.getElementById('openMainSite').addEventListener('click', function(e) {
            if (window.innerWidth <= 768) {
                e.preventDefault();
                if (confirm('IMPORTANT !\n\nAvant d\'ouvrir index.html, vous devez vider le cache.\n\n1. Le site va s\'ouvrir\n2. Appuyez immédiatement sur Ctrl + Shift + R\n\nCliquez OK pour continuer.')) {
                    window.open('index.html', '_blank');
                }
            }
        });
        
        // Run tests on load
        runTests();
        
        // Update live metrics on resize
        window.addEventListener('resize', updateLiveMetrics);
        
        // Update metrics every 2 seconds
        setInterval(updateLiveMetrics, 2000);
    </script>
</body>
</html>
